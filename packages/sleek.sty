\ProvidesPackage{sleek}[2025/11/09 v2.0.0 Sleek]

%%%%%%%%%%%%
% Settings %
%%%%%%%%%%%%

% Encoding

\RequirePackage[utf8]{inputenc}

% Font

\RequirePackage{libertine}
\RequirePackage{libertinust1math}
\RequirePackage[scaled=0.8]{beramono}
\RequirePackage[T1]{fontenc}
\RequirePackage{microtype}
\RequirePackage[none]{hyphenat} % never hyphenate

\emergencystretch=\maxdimen % never display text out of margin

% Layout

\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage[strict]{changepage} % for side notes
\RequirePackage[style=empty]{clrdblpg} % skip empty double pages
\RequirePackage[bottom,flushmargin]{footmisc} % flush footnotes

\geometry{
    margin=2.5cm,
    footskip=1cm,
    % marginparwidth=3cm,
    % marginparsep=0.5cm,
    % bindingoffset=0cm,
    includefoot,
    % includemp,
}

\pagestyle{fancy}
\fancyhead[L]{}
\fancyhead[R]{}
\fancyfoot[C]{\thepage}

\renewcommand*{\headrulewidth}{0pt}

% Titles

\RequirePackage{titlesec}
\RequirePackage{titletoc}

\titleformat{\part}[display]{\centering\Huge\scshape}{\thepart}{0em}{}
\titleformat{\chapter}{\huge\scshape}{\thechapter}{1em}{}
\titleformat*{\section}{\Large\scshape}
\titleformat*{\subsection}{\large\scshape}
\titleformat*{\subsubsection}{\normalsize\scshape}

\titlespacing*{\part}{0em}{7.5cm}{0em}
\titlespacing*{\chapter}{0em}{2.5cm}{1em}

\renewcommand{\chaptermark}[1]{\markboth{\scshape\thechapter\hspace{0.5em} #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\scshape\thesection\hspace{0.5em} #1}}

% Text

\RequirePackage{csquotes}
\RequirePackage[inline]{enumitem}
\RequirePackage{eurosym}
\RequirePackage[parfill]{parskip}
\RequirePackage[dvipsnames]{xcolor}

% Links

\RequirePackage[
    pdfusetitle,
    colorlinks=true,
    linktoc=page,
    allcolors=Blue
]{hyperref}
\RequirePackage{bookmark}
\RequirePackage{qrcode}

% Mathematics

\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{bm}
\RequirePackage{esint}
\RequirePackage{nicefrac}
\RequirePackage{mathtools}

% Units

\RequirePackage{siunitx}

\sisetup{separate-uncertainty}
\sisetup{separate-uncertainty-units=single}

% Figures

\RequirePackage{float}
\RequirePackage[skip=1.5ex]{caption}
\RequirePackage{subcaption}
\RequirePackage{wrapfig}

\captionsetup{labelsep=period} % 'Figure 1.2.' instead of 'Figure 1.2:'

% Tables

\RequirePackage{array}
\RequirePackage{booktabs}
\RequirePackage{multirow}

\renewcommand{\arraystretch}{1.1}

% Algorithms

\RequirePackage[ruled]{algorithm}
\RequirePackage[noend]{algpseudocode}

\makeatletter
\renewcommand\fs@ruled{% https://ctan.org/pkg/float
    \def\@fs@cfont{\bfseries}\let\@fs@capt\floatc@ruled%
    \def\@fs@pre{\hrule height \heavyrulewidth depth 0pt \kern 4pt}%
    \def\@fs@mid{\kern 4pt \hrule height \heavyrulewidth depth 0pt \kern 4pt}%
    \def\@fs@post{\kern 4pt \hrule height \heavyrulewidth depth 0pt \relax}%
    \let\@fs@iftopcapt\iftrue%
}
\makeatother

\algrenewcommand{\algorithmiccomment}[1]{\hfill #1}
\algrenewcommand{\alglinenumber}[1]{\footnotesize{#1}}

\algnewcommand\Input{\item[\textbf{Input:}]}
\algnewcommand\Output{\item[\textbf{Output:}]}

\algnewcommand\Break{\textbf{break}}
\algnewcommand\Continue{\textbf{continue}}

% Appendix

\RequirePackage{appendix} % subappendices environment

% Bibliography

\RequirePackage[
    backend=biber,
    style=numeric-comp,
    sorting=none,
    % refsection=chapter, % refs per chapter
    maxcitenames=1,
    maxbibnames=3,
    backref=false,
    url=true,
    doi=false,
    isbn=false,
    eprint=false,
]{biblatex}
\RequirePackage{xurl} % break out-of-bounds URLs

\setlength\bibitemsep{1ex}

\DeclareFieldFormat*{title}{\enquote{#1}}
\DeclareFieldFormat*{citetitle}{\enquote{#1}}

\renewcommand*{\intitlepunct}{\space}

\DefineBibliographyStrings{english}{
    backrefpage = {page},
    backrefpages = {pages}
}

\DefineBibliographyStrings{french}{
    backrefpage = {page},
    backrefpages = {pages}
}

\DefineBibliographyStrings{german}{
    backrefpage = {Seite},
    backrefpages = {Seiten}
}

\makeatletter
\DeclareCiteCommand{\fullcite} % cite ALL authors
    {\usebibmacro{prenote}}
    {\usedriver
        {\c@maxnames99\relax
        \DeclareNameAlias{sortname}{default}}
        {\thefield{entrytype}}}
    {\multicitedelim}
    {\usebibmacro{postnote}}
\makeatother

% Others

\RequirePackage{comment}
\RequirePackage{lipsum}

%%%%%%%%%%%
% Options %
%%%%%%%%%%%

% Header

\DeclareOption{header}{
    \geometry{includehead}
    \fancyhead[R]{\leftmark}
}

% Babel

\DeclareOption{french}{
    \frenchbsetup{StandardLists=true}
    \frenchbsetup{SmallCapsFigTabCaptions=false}
}

\ProcessOptions\relax

%%%%%%%%%%%%
% Commands %
%%%%%%%%%%%%

% Abbreviations

\def\cf{\emph{cf.}\@} % confer
\def\eg{\emph{e.g.}\@} % exempli gratia
\def\ie{\emph{i.e.}\@} % id est

% Mathematics

\DeclarePairedDelimiter\rbk{(}{)} % round brackets (parentheses)
\DeclarePairedDelimiter\cbk{\{}{\}} % curly brackets {braces}
\DeclarePairedDelimiter\sbk{[}{]} % square brackets [brackets]

\DeclarePairedDelimiter\abs{\lvert}{\rvert} % absolute value |x|
\DeclarePairedDelimiter\norm{\lVert}{\rVert} % norm ||x||
\DeclarePairedDelimiter\ceil{\lceil}{\rceil} % ceil ⌈x⌉
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor} % floor ⌊x⌋

\newcommand*{\fact}[1]{#1!} % factorial x!
\newcommand*{\grad}[1]{\nabla_{\!{#1}}} % gradient

\renewcommand*{\d}[1]{\operatorname{d}\!{#1}} % upright 'd' for differential

\DeclareMathOperator{\tr}{tr} % trace
\DeclareMathOperator{\diag}{diag} % diagonal

% Figures

\newcommand*{\noskipcaption}[1]{\caption{#1}\vspace{-\intextsep}} % caption without additional vertical space

% Footnotes

\makeatletter
\def\blindfootnote{\gdef\@thefnmark{}\@footnotetext} % footnote without number
\makeatother

% Sidenotes

\newcommand{\sidenote}[1]{%
\checkoddpage%
\ifoddpage
\marginpar{\raggedright\footnotesize #1}
\else
\marginpar{\raggedleft\footnotesize #1}
\fi
}

\endinput
